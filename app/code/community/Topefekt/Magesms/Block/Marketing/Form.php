<?php /**
 * Mage SMS - SMS notification & SMS marketing
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the BSD 3-Clause License
 * It is available through the world-wide-web at this URL:
 * http://opensource.org/licenses/BSD-3-Clause
 *
 * @category    TOPefekt
 * @package     TOPefekt_Magesms
 * @copyright   Copyright (c) 2012-2014 TOPefekt s.r.o. (http://www.mage-sms.com)
 * @license     http://opensource.org/licenses/BSD-3-Clause
 */
 class Topefekt_Magesms_Block_Marketing_Form extends Mage_Adminhtml_Block_Widget_Form { protected function _prepareForm() { $id7c8c8e1d1b44e9917ce2ae9b4c7d03e2a3ab683 = $this->getUrl('*/*/filter'); $i1791b2d1f89bb2bd83b34046f59125af207713db = new Varien_Data_Form( array('id' => 'marketing_filter', 'action' => $id7c8c8e1d1b44e9917ce2ae9b4c7d03e2a3ab683, 'method' => 'get') ); $i5a4070f5dbe2b3be0f175bc31d21ce8a0e2e76dd = 'magesms_marketing_'; $i1791b2d1f89bb2bd83b34046f59125af207713db->setHtmlIdPrefix($i5a4070f5dbe2b3be0f175bc31d21ce8a0e2e76dd); $i1791b2d1f89bb2bd83b34046f59125af207713db->addField('customer_not', 'hidden', array( 'name' => 'customer_not', )); $i00f9b0a11b6d8c15e9d603e29ad96b2c88140a51 = $i1791b2d1f89bb2bd83b34046f59125af207713db->addFieldset('base_fieldset', array( 'legend' => Mage::helper('magesms')->__('SMS Marketing - bulk SMS filter'), ) ); $i1d62211db8a9db72de6d5dab2047f18cbfa90e19 = $i00f9b0a11b6d8c15e9d603e29ad96b2c88140a51->addFieldset('fieldset1', array('class' => 'float-left')); $if71cbed623a99cd5a1032d4d3388bfd486053db2 = array('' => '-->'.Mage::helper('magesms')->__('All stores')); foreach (Mage::app()->getWebsites($this->_isAdminScopeAllowed) as $i9fdb3b1e2e6984ebdd1220ec199279013c5483fc) { $if71cbed623a99cd5a1032d4d3388bfd486053db2[$i9fdb3b1e2e6984ebdd1220ec199279013c5483fc->getId()] = $i9fdb3b1e2e6984ebdd1220ec199279013c5483fc->getDataUsingMethod('name'); } $i1d62211db8a9db72de6d5dab2047f18cbfa90e19->addField('website_id', 'select', array( 'name' => 'website_id', 'options' => $if71cbed623a99cd5a1032d4d3388bfd486053db2, 'label' => Mage::helper('magesms')->__('Store:'), )); $i80d5e7e038cde7aac7e5d2335ded4e7785aa29c5 = Mage::getModel('customer/group')->getCollection()->toOptionArray(); array_unshift($i80d5e7e038cde7aac7e5d2335ded4e7785aa29c5, array('label' => '-->'.Mage::helper('magesms')->__('All'), 'value' => '')); $i1d62211db8a9db72de6d5dab2047f18cbfa90e19->addField('group_id', 'select', array( 'name' => 'group_id', 'values' => $i80d5e7e038cde7aac7e5d2335ded4e7785aa29c5, 'label' => Mage::helper('magesms')->__('Groups:'), )); $i1d62211db8a9db72de6d5dab2047f18cbfa90e19->addField('type', 'select', array( 'name' => 'type', 'options' => array( '' => '-->'.Mage::helper('magesms')->__('All customers'), '1' => Mage::helper('magesms')->__('company customers'), '2' => Mage::helper('magesms')->__('private customers') ), 'label' => Mage::helper('magesms')->__('Type:'), 'title' => Mage::helper('magesms')->__('Type:'), )); $i6973b269d81f66e6ce768ea1e423d5ef438b7e44 = $i00f9b0a11b6d8c15e9d603e29ad96b2c88140a51->addFieldset('fieldset2', array('class' => 'float-left')); $ic7e041f1c0f99ab24f17177e95509393b8ba49be = Mage::getModel('eav/config')->getAttribute('customer', 'gender'); if ($ic7e041f1c0f99ab24f17177e95509393b8ba49be->getId()) { $id92fd65e479a45fd28bc877dc5d15fc219af26db = $ic7e041f1c0f99ab24f17177e95509393b8ba49be->getSource()->getAllOptions(); foreach($id92fd65e479a45fd28bc877dc5d15fc219af26db as $i670253c23c6fcba76bc4256a88fdd8fbc1041039=>$i287bcbe0c9dfb97b6c1bb92e5d892c0dea8b7ab0) $id92fd65e479a45fd28bc877dc5d15fc219af26db[$i670253c23c6fcba76bc4256a88fdd8fbc1041039]['label'] = Mage::helper('magesms')->__($id92fd65e479a45fd28bc877dc5d15fc219af26db[$i670253c23c6fcba76bc4256a88fdd8fbc1041039]['label']); $id92fd65e479a45fd28bc877dc5d15fc219af26db[0]['label'] = '-->'.Mage::helper('magesms')->__('All'); $i6973b269d81f66e6ce768ea1e423d5ef438b7e44->addField('gender', 'select', array( 'name' => 'gender', 'values' => $id92fd65e479a45fd28bc877dc5d15fc219af26db, 'label' => Mage::helper('magesms')->__('Gender:'), 'title' => Mage::helper('magesms')->__('Gender:'), )); } $i6973b269d81f66e6ce768ea1e423d5ef438b7e44->addField('firstname', 'text', array( 'name' => 'firstname', 'label' => Mage::helper('magesms')->__('First name:'), 'title' => Mage::helper('magesms')->__('First name:'), )); $i6973b269d81f66e6ce768ea1e423d5ef438b7e44->addField('lastname', 'text', array( 'name' => 'lastname', 'label' => Mage::helper('magesms')->__('Last name:'), 'title' => Mage::helper('magesms')->__('Last name:'), )); $i86c493e99cbd47d91439d76b69a8635ff7e0951b = $i00f9b0a11b6d8c15e9d603e29ad96b2c88140a51->addFieldset('fieldset3', array('class' => 'float-left clear')); $i86c493e99cbd47d91439d76b69a8635ff7e0951b->addField('newsletter', 'select', array( 'name' => 'newsletter', 'options' => array( '' => '-->'.Mage::helper('magesms')->__('All'), '1' => Mage::helper('magesms')->__('yes'), '2' => Mage::helper('magesms')->__('no') ), 'label' => Mage::helper('magesms')->__('Newsletter:'), 'title' => Mage::helper('magesms')->__('Newsletter:'), )); $i195899c9895b81b9bc75dba762c949638a6f36dd = Mage::getModel('directory/country')->getCollection()->toOptionArray(); $i195899c9895b81b9bc75dba762c949638a6f36dd[0]['label'] = '-->'.Mage::helper('magesms')->__('All countries'); $i86c493e99cbd47d91439d76b69a8635ff7e0951b->addField('country_id', 'select', array( 'name' => 'country_id', 'values' => $i195899c9895b81b9bc75dba762c949638a6f36dd, 'label' => Mage::helper('magesms')->__('Country:'), )); $i86c493e99cbd47d91439d76b69a8635ff7e0951b->addField('city', 'text', array( 'name' => 'city', 'label' => Mage::helper('magesms')->__('City:'), 'title' => Mage::helper('magesms')->__('City:'), )); $i5e2f8ae4963934ca8fbc2fff6103b6356dd52c78 = Mage::app()->getLocale()->getDateFormat(Mage_Core_Model_Locale::FORMAT_TYPE_MEDIUM); $i8e6fd52df86f5295fffe5104f8db4ec6715de949 = $i00f9b0a11b6d8c15e9d603e29ad96b2c88140a51->addFieldset('reg_fieldset', array( 'class' => 'float-left', ) ); $i8e6fd52df86f5295fffe5104f8db4ec6715de949->addField('reg_from', 'date', array( 'name' => 'reg_from', 'format' => $i5e2f8ae4963934ca8fbc2fff6103b6356dd52c78, 'image' => $this->getSkinUrl('images/grid-cal.gif'), 'label' => Mage::helper('magesms')->__('Date of registration from: '), 'title' => Mage::helper('magesms')->__('Date of registration from: '), )); $i8e6fd52df86f5295fffe5104f8db4ec6715de949->addField('reg_to', 'date', array( 'name' => 'reg_to', 'format' => $i5e2f8ae4963934ca8fbc2fff6103b6356dd52c78, 'image' => $this->getSkinUrl('images/grid-cal.gif'), 'label' => Mage::helper('magesms')->__('to: '), 'title' => Mage::helper('magesms')->__('to: '), )); $i8e6fd52df86f5295fffe5104f8db4ec6715de949->addField('reg_allyears', 'checkbox', array( 'name' => 'reg_allyears', 'value' => 1, 'checked' => $this->getFilterData()->getRegAllyears() ? true : false, 'label' => Mage::helper('magesms')->__('All years').':', 'title' => Mage::helper('magesms')->__('All years'), )); $i94a0c73886b997f60f48f7e0bbb9bc57703a3fdd = $i00f9b0a11b6d8c15e9d603e29ad96b2c88140a51->addFieldset('birth_fieldset', array( 'class' => 'float-left', ) ); $i94a0c73886b997f60f48f7e0bbb9bc57703a3fdd->addField('birth_from', 'date', array( 'name' => 'birth_from', 'format' => $i5e2f8ae4963934ca8fbc2fff6103b6356dd52c78, 'image' => $this->getSkinUrl('images/grid-cal.gif'), 'label' => Mage::helper('magesms')->__('Date of birth from: '), 'title' => Mage::helper('magesms')->__('Date of birth from: '), )); $i94a0c73886b997f60f48f7e0bbb9bc57703a3fdd->addField('birth_to', 'date', array( 'name' => 'birth_to', 'format' => $i5e2f8ae4963934ca8fbc2fff6103b6356dd52c78, 'image' => $this->getSkinUrl('images/grid-cal.gif'), 'label' => Mage::helper('magesms')->__('to: '), 'title' => Mage::helper('magesms')->__('to: '), )); $i94a0c73886b997f60f48f7e0bbb9bc57703a3fdd->addField('birth_allyears', 'checkbox', array( 'name' => 'birth_allyears', 'value' => 1, 'checked' => $this->getFilterData()->getBirthAllyears() ? true : false, 'label' => Mage::helper('magesms')->__('All years').':', 'title' => Mage::helper('magesms')->__('All years'), )); $i1791b2d1f89bb2bd83b34046f59125af207713db->setUseContainer(true); $this->setForm($i1791b2d1f89bb2bd83b34046f59125af207713db); return parent::_prepareForm(); } protected function _initFormValues() { $ia61712c27ea241bd7a543dc2b02ea572274d0322 = $this->getFilterData()->getData(); foreach ($ia61712c27ea241bd7a543dc2b02ea572274d0322 as $i670253c23c6fcba76bc4256a88fdd8fbc1041039 => $if2eee0665f163a28f4adcfe84e3fc666bf1bcd89) { if (is_array($if2eee0665f163a28f4adcfe84e3fc666bf1bcd89) && isset($if2eee0665f163a28f4adcfe84e3fc666bf1bcd89[0])) { $ia61712c27ea241bd7a543dc2b02ea572274d0322[$i670253c23c6fcba76bc4256a88fdd8fbc1041039] = explode(',', $if2eee0665f163a28f4adcfe84e3fc666bf1bcd89[0]); } } $this->getForm()->addValues($ia61712c27ea241bd7a543dc2b02ea572274d0322); return parent::_initFormValues(); } protected function _beforeToHtml() { $id567d29153b9150b8add34bc81058cd5432e46a0 = parent::_beforeToHtml(); return $id567d29153b9150b8add34bc81058cd5432e46a0; } }